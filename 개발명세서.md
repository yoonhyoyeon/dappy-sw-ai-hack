## 1. 서비스 개요

본 서비스는 **캠퍼스 건물 내부 재난 상황**에서 사용자를 안전 지역으로 안내하기 위한
**실시간 재난 대응 가이드 시스템**이다.

- 사용자 인터페이스는 **웹앱(PWA)** 형태로 제공된다. (스마트폰 기반)
- 건물별 **비상구 / 소화기 / 대피 경로**를 **3D 도면 기반 UI**로 제공
- 화재, 지진, 칼부림 등 **재난 발생 시**
    - 사용자 **현재 위치 기준**
    - **구역별 실시간 상태**를 반영하여
    - **동적으로 변경되는 대피 경로**를 안내

프론트엔드는 **시각화 및 사용자 안내 중심**이며,
재난 감지는 AI 서버, 판단 보조는 **프론트 규칙 기반**으로 수행한다.

---

## 2. Zone 모델 정의

### 2.1 기본 개념

- **CCTV 1대 = 1 Zone**
- Zone은 재난 판단 및 경로 계산의 최소 단위

### 2.2 Zone 데이터 구조 (AI 서버 → App Frontend)

```tsx
{
  zoneId: string,
  fireLevel: number,       // 화재 강도 (0 ~ 1)
  smokeLevel: number,      // 연기 농도 (0 ~ 1)
  knife: boolean,          // 칼부림 발생 여부
  extinguisher: boolean,  // 소화기 존재 여부
  stair: boolean,          // 계단 구역 여부
  people_cnt: number       // 혼잡도 판단용
}

```

---

## 3. 사용자 현재 위치 처리 방식 (해커톤 시연 기준)

- 실제 서비스에서는 **BLE 비콘 기반**으로 사용자 위치를 자동 인식
- 해커톤 환경에서는 하드웨어 제약으로 인해 **앱 UI 입력 방식으로 대체**

### 시연 방식

- 앱 실행 시 **초기 위치는 임의의 고정 Zone**으로 설정
- 사용자가 **앱 내 3D 도면에서 특정 Zone을 터치(클릭)** 하면:
    - 해당 Zone을 사용자의 현재 위치(`currentZoneId`)로 설정
- 이후 모든 대피 경로 계산 및 안내는
**선택된 Zone을 기준으로 동작**

---

## 4. 사용자 앱(App) 기능

### 4.1 3D 도면 렌더링

- **Three.js** 기반 3D 도면 렌더링
- 앱 화면에서 건물 내부 구조를 단순화하여 표현
- Zone 단위 색상/오버레이로 상태 표시
    - 화재/연기: 빨강·주황
    - 차단: 회색·비활성

---

### 4.2 재난 발생 시 대피 경로 안내 (핵심 기능)

- 재난 유형:
    - 화재
    - 지진 (`blockedLevel`)
    - 칼부림 (`knife === true`)
- 사용자 현재 Zone 기준
- 위험 Zone 회피 + 혼잡도 반영
- **구역 상태 변화에 따라 실시간으로 대피 경로 갱신**
- 앱 화면에 경로를 직관적으로 표시

---

### 4.3 초기 진압 가능 여부 판단 (프론트 규칙 기반)

- 앱 프론트엔드에서 단순 규칙 기반 판단 수행
- 조건 예:
    - `fireLevel`, `smokeLevel`이 임계값 이하
    - 인근 Zone에 `extinguisher === true`
- 가능 시:
    - **대피 경로 + 소화기 위치까지의 경로를 추가 안내**
- 불가능 시:
    - 즉시 대피 경로만 표시

> 본 기능은 해커톤용 UX 시연 목적이며 실제 안전 판단을 대체하지 않음
> 

---

## 5. AI 서버 연동 (해커톤 전제)

- **1초 주기 polling**
- App Frontend → AI 서버 요청
- AI 서버 역할:
    - CCTV 기반 Zone 상태 데이터 반환
    - 사용자 위치 기준 대피 경로 반환
- 프론트엔드는 응답을 받아 **시각화 및 사용자 안내만 수행**

---

## 6. 설계 핵심 포인트

- 웹이 아닌 **모바일 앱(App) 기반 사용자 인터페이스**
- GPS 미사용, **실내에 적합한 Zone 기반 위치 모델**
- 붕괴 감지가 아닌 **통로 차단 여부 판단**
- 사용자 조작 최소화 (시각적 경로 안내 중심)
- CCTV 기반 인프라 확장 가능 구조

---

## 7. 한 줄 요약

> 본 서비스는 모바일 앱(App) 기반의 사용자 인터페이스를 통해
CCTV 기반 Zone 상태 데이터를 실시간으로 수신하고,
Three.js로 렌더링된 3D 도면 상에서 사용자의 현재 위치(Zone 선택 기준)를 중심으로
재난 상황에 따라 동적으로 변경되는 대피 경로와
초기 진압 보조 경로를 직관적으로 안내하는 해커톤용 프론트엔드 프로토타입이다.
> 

---